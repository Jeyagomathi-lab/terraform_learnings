AWS command line interface

ğŸ”¹ What is AWS CLI ?
The AWS Command Line Interface (AWS CLI) is an open source tool that enables you to interact with AWS services using commands in your command-line shell
Using AWS CLI, you can automate AWS tasks faster than using the web console.

ğŸ”¹ Key Benefits
âœ… Faster Deployment â€“ Run commands instead of clicking in AWS Console
âœ… Automation â€“ Use AWS CLI in scripts for Terraform, Ansible, and CI/CD pipelines
âœ… Access to All AWS Services â€“ Manage EC2, S3, IAM, CloudFormation, Lambda, etc.
âœ… Multi-Account & Multi-Region Support â€“ Switch between different AWS accounts easily
âœ… Better Security â€“ Store credentials securely instead of using them in Terraform scripts

ğŸ”¹ Common AWS CLI Commands

aws s3 ls                      # List all S3 buckets
aws ec2 describe-instances     # List all EC2 instances
aws iam list-users             # List IAM users
aws configure list             # Show current AWS CLI configuration
aws secretsmanager list-secrets # List all stored secrets
aws sts get-caller-identity #Verify authentication which configure
aws ec2 describe-instances --region us-east-1 # list all instance on that particular region Default Region (e.g., us-east-1)
aws ec2 describe-instances --region us-east-1 --query "Reservations[0].Instances[0].Tags[0]" # list tags assign to instance of 0th index

aws ec2 describe-instances --region us-east-1 --query "Reservations[*].Instances[*].[Tags[?Key=='Name'].Value |[0] , State.Name, InstanceId]" --output table
----------------------------------------------
|              DescribeInstances             |
+--------+-----------+-----------------------+
|  testVM|  running  |  i-idofVM|
+--------+-----------+-----------------------+

aws ec2 describe-instances --region us-east-1 --query "Reservations[*].Instances[*].[Tags[?Key=='Name'].Value | [0], Placement.AvailabilityZone]" --output table
--------------------------
|    DescribeInstances   |
+---------+--------------+
|  testVM |  us-east-1a  |
+---------+--------------+

aws ec2 describe-instances --region us-east-1 --query "Reservations[*].Instances[*].[Tags[?Key=='Name'].Value|[0], Placement.AvailablityZone, InstanceId, State.Name]" --output table
---------------------------------------------------------
|                   DescribeInstances                   |
+--------+-------+-----------------------+--------------+
|  testVM|  None |  i-idofVm  |  terminated  |
+--------+-------+-----------------------+--------------+

1ï¸âƒ£ aws ec2 describe-instances
This is the main AWS CLI command that retrieves details of all EC2 instances.


2ï¸âƒ£ --region us-east-1
This specifies the AWS region where your instances are running.
ğŸ‘‰ You can replace us-east-1 with any region where your instances exist.


3ï¸âƒ£ --query
The --query flag is used to filter and extract specific details from the command output.
Now, letâ€™s break down whatâ€™s inside the query:

sh
CopyEdit
"Reservations[*].Instances[*].[Tags[?Key=='Name'].Value | [0], State.Name]"

âœ… Understanding the Query
Part of Query	Meaning
Reservations[*]	AWS groups instances into reservations (each API call may return multiple reservations). The [*] means select all reservations.
.Instances[*]	Inside each reservation, there are instances. [*] means select all instances from those reservations.
`[Tags[?Key=='Name'].Value	[0], State.Name]`


4ï¸âƒ£ Tags[?Key=='Name'].Value | [0]
	â€¢ Tags â†’ Each instance has multiple tags (Key-Value pairs).
	â€¢ [?Key=='Name'] â†’ Filters tags where the Key is "Name".
	â€¢ .Value â†’ Retrieves the value of the tag (actual instance name).
	â€¢ | [0] â†’ Picks the first matching value (if multiple tags exist).
ğŸ‘‰ Example of an EC2 instance's tags:

json
CopyEdit
"Tags": [
    {
        "Key": "Environment",
        "Value": "Production"
    },
    {
        "Key": "Name",
        "Value": "My-EC2-Instance"
    }
]

ğŸ‘‰ The query extracts "My-EC2-Instance" from the "Name" tag.


5ï¸âƒ£ State.Name
	â€¢ This retrieves the current state of the instance.
	â€¢ Possible values: "running", "stopped", "terminated", etc.


6ï¸âƒ£ --output table
	â€¢ This formats the output in a nice readable table.


